!function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}({0:function(e,n,t){var i;i=function(e,n){var i=t(100),r=t(3),o=t(101);o.init();var a=$(".fields"),s={phone:{rules:{required:!0,type:"phone"},message:{required:"请输入手机号",type:"请输入正确的手机号"}},password:{rules:{required:!0,minLength:6,maxLength:20},message:{required:"请输入密码",minLength:"密码至少6个字符",maxLength:"密码最多20个字符"}}};$("#main-form").find("input[name=phone]").focus();var f=new i(a,s),c=!1,u=function(){if(!c&&f.validate()){c=!0;var e=$("#main-form").serializeArray(),n={};$.each(e,function(){n[this.name]=this.value}),r.post("/api/login/submit",n).then(function(e){"undefined"==typeof inWindow?location.href=e.data.next:window.parent.location.reload()}).always(function(){c=!1})}};$("#submit").on("click",function(){u()}),$("#main-form").find("input").on("keydown",function(e){13==e.keyCode&&u()})}.call(n,t,n,e),!(void 0!==i&&(e.exports=i))},2:function(e,n,t){var i;i=function(e,n){n.isWeixin=function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},n.isMobile=function(){var e=window.navigator.userAgent,n=["Android","iPhone","iPod","iPad","Windows Phone","BlackBerry","MQQBrowser"];if(e.indexOf("Windows NT")<0&&e.indexOf("Macintosh")<0)for(var t=0;t<n.length;t++){var i=n[t];if(e.indexOf(i)>=0)return!0}return!1},n.isFirefox=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>0},n.isChrome=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("chrome")>0||e.indexOf("chromium")>0},n.isSafari=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>0&&e.indexOf("version")>0&&e.indexOf("chrome")<0&&e.indexOf("chromium")<0},n.isIE=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")>0||e.indexOf("rv:")>0&&e.indexOf("trident")>0||e.indexOf("edge")>0},n.isEdge=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("edge")>0},n.isMac=function(){var e=navigator.platform;return e.toLowerCase().indexOf("mac")>=0}}.call(n,t,n,e),!(void 0!==i&&(e.exports=i))},3:function(e,n,t){var i;i=function(){var e={};return e.post=function(e,n,t){var i={url:e,data:n,method:"post",dataType:"json",cache:!1,timeout:45e3},r=$.Deferred();return $.ajax(i).fail(function(){t!==!1&&$.alert("请求处理失败"),r.reject()}).then(function(e){var n=e.code;if(0===n)r.resolve(e);else if(2===n){var t=e.msg;t&&$.confirm({title:"请登录",content:t}).then(function(){$.loginWindow()}),r.reject(e)}else{var t=e.msg;t&&$.toast(t),r.reject(e)}}),r},e.loadHtml=function(e,n){var t={url:e,data:n,method:"get",dataType:"html",cache:!1},i=$.Deferred();return $.ajax(t).fail(function(){$.alert("加载失败")}).then(function(e){i.resolve(e)}),i},e}.call(n,t,n,e),!(void 0!==i&&(e.exports=i))},100:function(e,n,t){var i;i=function(){var e=t(2),n=function(e,n){this.container=e,this.options=n};return n.prototype.tipError=function(n,t){if(e.isMobile())return void $.toast(t);var i=this.container,r=i.find("[name="+n+"]");r.nextAll(".error").show().text(t),r.addClass("item-error"),r.on("focus.validate",function(){$(this).removeClass("item-error").off("focus.validate")})},n.prototype.validate=function(e){var n=this.options,t=this.container;if(t.find(".error").hide(),t.find(".item-error").removeClass("item-error"),null!=e){$.isArray(e)||(e=[e]),n={};for(var i=0;i<e.length;i++){var r=e[i];n[r]=this.options[r]}}var o=0;for(var r in n){var a=n[r],s=t.find("[name="+r+"]");if(0!=s.length&&!s.is(":hidden")){var f=null,c=s.val(),u=a.rules;for(var d in u)if($.isFunction(u[d])){var l=u[d]();if(!l){f=d;break}}else{if("required"==d&&""==$.trim(c)){f=d;break}if("type"==d){var p=u.type;if("phone"==p){var h=/^(1[0-9])\d{9}$/gi;if(11!=c.length||!h.test(c)){f=d;break}}}if("minLength"==d&&c.length<u.minLength){f=d;break}if("maxLength"==d&&c.length>u.maxLength){f=d;break}}null!=f&&(o++,this.tipError(r,a.message[f]))}}return 0==o},n}.call(n,t,n,e),!(void 0!==i&&(e.exports=i))},101:function(e,n,t){var i;i=function(e,n){var i=t(3),r=t(2);n.init=function(e){e||(e=0);var n=$("#login-wechat");n.length>0&&n.on("click",function(){i.post("/api/login/create_platform_state",{type:e}).then(function(e){if(r.isWeixin()){var n=e.data.state,t="wxee1acd934f6fedf6",i=encodeURIComponent("http://mubu.io/wxlogin"),o="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t+"&redirect_uri="+i+"&response_type=code&scope=snsapi_userinfo&state="+n+"#wechat_redirect";location.href=o}else if(r.isMobile())$.alert("微信登录只能在微信客户端中使用<br>请在微信中搜索公众号“幕布”<br>关注后即可在微信中使用幕布");else{var n=e.data.state,t="wx1dd686ead0ffc496",i=encodeURIComponent("http://mubu.io/wxlogin"),o="https://open.weixin.qq.com/connect/qrconnect?appid="+t+"&redirect_uri="+i+"&response_type=code&scope=snsapi_login&state="+n+"#wechat_redirect";location.href=o}})});var t=$("#login-qq");t.length>0&&t.on("click",function(){i.post("/api/login/create_platform_state",{type:e}).then(function(e){var n=e.data.state,t="101328916",i=encodeURIComponent("http://mubu.io/qqlogin"),r="https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id="+t+"&redirect_uri="+i+"&scope=get_user_info&state="+n;location.href=r})})}}.call(n,t,n,e),!(void 0!==i&&(e.exports=i))}});